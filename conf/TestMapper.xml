<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    接口方式调用，两个映射：
    namespace：映射到接口的全限定名
    id：映射到方法名
-->
<mapper namespace="com.atzyy.mapper.TestMapper">
    <resultMap id="BaseResultMap" type="com.atzyy.entity.TestEntity">
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="age" jdbcType="INTEGER" property="age"/>
        <result column="first_name" jdbcType="VARCHAR" property="firstName"/>
        <result column="grow_up" jdbcType="INTEGER" property="growUp" />
        <result column="grow_up" jdbcType="INTEGER" property="growUpName" typeHandler="com.atzyy.typeHandlers.EnumTypeHandler"/>
    </resultMap>
    <select id="selectTest" resultMap="BaseResultMap">
        select * from test where id = #{id}
    </select>

    <!--
        获取自增主键的值：
            mybatis 利用 statement.getGenreatedKeys() 获取自增主键，
            useGeneratedKeys 使用自增主键获取主键值策略
            keyProperty 指定对应的主键属性，也就是 mybatis 获取到主键值之后，将这个值封装给 javaBean 的哪个属性
    -->
    <insert id="addTest" parameterType="com.atzyy.entity.TestEntity" useGeneratedKeys="true" keyProperty="id">
        insert into test(name,age,first_name,grow_up) values (
            #{name},#{age},#{firstName},#{growUp}
        )
    </insert>

</mapper>